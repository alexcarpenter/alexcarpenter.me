---
import { Icon } from "astro-icon/components";
import type { HTMLTag, Polymorphic } from "astro/types";
import { cva, type VariantProps } from "class-variance-authority";

const sectionHeadingVariants = cva("scroll-mt-16 font-medium tracking-tight", {
  variants: {
    color: {
      purple: "text-purple-600 dark:text-purple-400",
      green: "text-green-600 dark:text-green-400",
      red: "text-red-600 dark:text-red-400",
      yellow: "text-yellow-600 dark:text-yellow-400",
      blue: "text-blue-600 dark:text-blue-400",
      neutral: "text-neutral-600 dark:text-neutral-400",
      fuchsia: "text-fuchsia-600 dark:text-fuchsia-400",
      amber: "text-amber-600 dark:text-amber-400",
    },
  },
  defaultVariants: {
    color: "green",
  },
});

type Props<Tag extends HTMLTag> = Polymorphic<{ as: Tag }> &
  VariantProps<typeof sectionHeadingVariants> & {
    id: string;
  };

const { as: Tag = "h2", color, class: className, id, ...props } = Astro.props;
---

<Tag {...props} class={sectionHeadingVariants({ color, className })} id={id}
  ><a href={`#${id}`} class="group relative inline-block"
    ><span
      class="absolute flex h-[1lh] items-center px-2 opacity-0 transition-opacity group-hover:opacity-100 max-md:left-full md:right-full"
      ><Icon name="hash" class="size-4" /></span
    ><slot /></a
  ></Tag
>
